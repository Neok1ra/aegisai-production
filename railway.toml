# railway.toml
[build]
builder = "NIXPACKS"

[[services]]
name = "server"
[services.build]
command = "pip install -r requirements.txt"
[services.start]
command = "cd server && uvicorn main:app --host 0.0.0.0 --port $PORT"

[[services]]
name = "dashboard"
[services.build]
command = "cd dashboard && npm install && npm run build"
[services.start]
command = "cd dashboard && npm start"

[[services]]
name = "agent"
[services.build]
command = "cd agent && pip install -r requirements.txt"
[services.start]
command = "cd agent && python aegis_agent.py"

[[services]]
name = "redis"
image = "redis:7-alpine"
